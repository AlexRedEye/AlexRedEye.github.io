/* Base layout */
body {
  font-family: system-ui, sans-serif;
  max-width: 900px;
  margin: 2rem auto;
  line-height: 1.5;
  background: #fafafa;
  color: #222;
}

h1, h2, h3, h4 { margin: 0.4rem 0; }
h1 { text-align: center; margin-bottom: 1rem; }

/* Tabs */
.tabs {
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  margin-bottom: 1rem;
}
.tab-button {
  padding: 0.5rem 1rem;
  border-radius: 999px;
  border: 1px solid #ccc;
  background: #f5f5f5;
  cursor: pointer;
}
.tab-button.active {
  background: #e8f5e9;
  border-color: #4caf50;
  color: #1b5e20;
  font-weight: 600;
}

/* Screens */
.hidden { display: none; }

/* Stats */
.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.card {
  border: 1px solid #ddd;
  border-radius: 12px;
  padding: 1rem;
  background: white;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.card h2 { font-size: 1.3rem; color: #1976d2; }

/* Emphasis */
.score-big { color: #2e7d32; font-weight: 800; }

/* Layout helpers */
section { margin: 1.5rem 0; }
.row {
  display: flex;
  gap: 1rem;
  align-items: center;
  flex-wrap: wrap;
  margin: 0.5rem 0;
}
.upgrades, .automation, .manager, .manual, .crit, .skill, .prestige { margin-top: 1rem; }

p { margin: 0.3rem 0; }
.muted { color: #666; font-size: 0.9rem; display: inline-block; }

/* Buttons */
button {
  padding: 0.6rem 1rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #f5f5f5;
  font-size: 1rem;
  transition: background 0.2s, transform 0.1s, border-color 0.2s, color 0.2s;
}
button:hover:not(:disabled) { background: #e0e0e0; transform: translateY(-1px); }
button:active:not(:disabled) { background: #d5d5d5; transform: translateY(0); }
button:disabled { opacity: 0.5; cursor: not-allowed; }

/* Upgrade state colors */
button.affordable { background: #e8f5e9; border-color: #4caf50; color: #1b5e20; }
button.affordable:hover:not(:disabled) { background: #c8e6c9; }
button.unaffordable { background: #f9f9f9; border-color: #ccc; color: #777; }

/* Toasts */
#toast-container { position: relative; }
.toast {
  position: absolute;
  font-weight: bold;
  color: #2e7d32;
  pointer-events: none;
  animation: floatUp 1s ease-out forwards;
  font-size: 0.95rem;
  user-select: none;
  transform: translateX(-50%);
}
.toast.box { color: #1976d2; }
.toast.muns { color: #f57c00; }
@keyframes floatUp {
  from { opacity: 1; transform: translate(-50%, 0); }
  to   { opacity: 0; transform: translate(-50%, -40px); }
}

/* --- Prestige tree layout --- */
.tree-wrap {
  display: grid;
  grid-template-columns: 1fr 280px;
  gap: 1rem;
  align-items: start;
}
.tree-canvas {
  background: #111;
  border: 1px solid #222;
  border-radius: 12px;
  overflow: hidden;
  min-height: 520px;
}
.tree-side .card { background: #fff; }

/* SVG styling */
#tree-svg .edge {
  stroke: #bbb;
  stroke-width: 10;
  stroke-linecap: round;
  opacity: 0.85;
}
#tree-svg .node { cursor: pointer; }
#tree-svg .node circle { stroke: #fff; stroke-width: 4; }
#tree-svg .node text {
  fill: #fff;
  font-family: system-ui, sans-serif;
  font-weight: 700;
  text-anchor: middle;
  dominant-baseline: central;
  pointer-events: none;
}
.node.prod circle { fill: #5C6BC0; }
.node.log  circle { fill: #43A047; }
.node.meta circle { fill: #EF6C00; }
#tree-svg .node.selected circle { stroke: #ffeb3b; stroke-width: 6; }
#tree-svg .lvl {
  font-size: 18px;
  fill: #ffeb3b;
  stroke: rgba(0,0,0,0.6);
  paint-order: stroke fill;
  stroke-width: 3px;
}

/* Legend dots */
.dot { display: inline-block; width: 12px; height: 12px; border-radius: 999px; margin-right: 6px; }
.dot-prod { background: #5C6BC0; }
.dot-log  { background: #43A047; }
.dot-meta { background: #EF6C00; }

/* Contracts */
.progress-bar {
  width: 100%;
  height: 16px;
  border-radius: 999px;
  background: #eee;
  border: 1px solid #ccc;
  overflow: hidden;
  margin: 0.5rem 0;
}
#contract-progress {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #81c784, #4caf50);
  transition: width 0.25s ease;
}
