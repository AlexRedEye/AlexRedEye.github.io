:root{
  --bg:#0f1420; --pane:#141b2b; --card:#1b2336; --text:#e8ecf6; --dim:#98a2b3;
  --accent:#7aa2ff; --good:#19c37d; --warn:#fbbf24; --bad:#f87171;
  --r:#9aa4b2; --sr:#8dd3ff; --ssr:#ffd166;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,Segoe UI,Inter,Arial}
header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #1f2a44}
h1{margin:0;font-size:20px}
.ver{font-weight:400;color:var(--dim);font-size:12px;margin-left:6px}
.wallet{display:flex;gap:12px;align-items:baseline}
.tiny{font-size:12px}
.dim{color:var(--dim)}

.tabs{display:flex;gap:8px;padding:10px 16px;border-bottom:1px solid #1f2a44}
.tabs button{background:#10172a;color:#b9c1d1;border:1px solid #263352;padding:8px 12px;border-radius:8px;cursor:pointer}
.tabs button.active{background:var(--accent);color:#071224;border-color:#2b5bd5}

main{padding:16px}
.tab{display:none}
.tab.active{display:block}

.pane{background:var(--pane);border:1px solid #233055;border-radius:12px;padding:12px;margin-bottom:16px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media(max-width:1024px){.grid-3{grid-template-columns:1fr}.grid-2{grid-template-columns:1fr}}

.picker{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.card{background:var(--card);border:1px solid #2b3a5d;border-radius:10px;padding:8px}
.card .title{font-weight:700}
.card.r{box-shadow:0 0 0 1px var(--r) inset}
.card.sr{box-shadow:0 0 0 1px var(--sr) inset}
.card.ssr{box-shadow:0 0 0 1px var(--ssr) inset}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.chip{background:#0c1220;border:1px solid #2b3a5d;border-radius:999px;padding:2px 8px;font-size:12px}
.chip.badge{background:#13203d;border-color:#284578}
.pick{cursor:pointer;user-select:none}
.pick.selected{outline:2px solid var(--accent)}

.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.actions.right{justify-content:flex-end}
button{background:#1d2a4a;color:#e7efff;border:1px solid #3a548d;border-radius:8px;padding:8px 12px;cursor:pointer}
button:disabled{opacity:.55;cursor:not-allowed}
button.danger{background:#3d1c22;border-color:#7a2a35}

.split{display:grid;grid-template-columns:2fr 1fr;gap:12px}
.log{height:360px;overflow:auto;background:#0e1527;border:1px solid #233055;border-radius:8px;padding:8px}
.progress{height:8px;background:#0e1527;border:1px solid #233055;border-radius:9999px;overflow:hidden}
.progress>#deadline-bar{height:100%;background:var(--accent);width:100%}

.battle{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.battle-card{background:#0f172a;border:1px solid #223055;border-radius:10px;padding:8px}
.battle-card.dead{opacity:.6;filter:grayscale(0.6)}
.battle-card.selected{outline:2px solid var(--accent)}
.battle-card.target{box-shadow:0 0 0 2px var(--good) inset}
.bar{height:8px;background:#0b1020;border:1px solid #1f2a44;border-radius:999px;margin:4px 0}
.bar>span{display:block;height:100%;background:linear-gradient(90deg,#60a5fa,#34d399)}

.results{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}

/* Career stat indicators */
.statline{margin:4px 0;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;border:1px solid transparent}
.pill.weak{background:#ffefef;color:#b00020;border-color:#ffc5c5}
.pill.ok{background:#fff8e6;color:#9a6500;border-color:#ffe1a6}
.pill.good{background:#ecf9ef;color:#0b7a29;border-color:#bde9c7}
.pill.excel{background:#eef3ff;color:#1a49a6;border-color:#c6d6ff}
.legend{margin-top:6px}

.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(4,8,18,.6);backdrop-filter:blur(2px)}
.modal.hidden{display:none}
.modal-box{background:#0f172a;border:1px solid #233055;border-radius:12px;padding:12px;max-width:720px;width:92vw}
pre{white-space:pre-wrap;margin:0}

.hidden{display:none}
.pity{margin:4px 0}

/* ======================
   Mobile-friendly tweaks
   ====================== */

/* General: larger touch targets */
button, .card, .chip {
  min-height: 40px;
  font-size: 15px;
}

/* Reduce padding on very small screens */
@media(max-width: 600px) {
  body {
    font-size: 14px;
  }
  header {
    flex-direction: column;
    align-items: flex-start;
    gap: 6px;
  }
  .wallet {
    flex-wrap: wrap;
    gap: 8px;
  }

  .tabs {
    flex-wrap: wrap;
    gap: 6px;
    padding: 8px;
  }
  .tabs button {
    flex: 1 1 calc(50% - 6px);
    font-size: 14px;
    padding: 10px;
  }

  main {
    padding: 8px;
  }

  /* Stack grid layouts vertically */
  .grid-2, .grid-3, .split, .battle {
    display: block;
  }

  .pane {
    padding: 10px;
    margin-bottom: 12px;
  }

  /* Log panel shorter to fit screen */
  .log {
    height: 200px;
  }

  /* Results grid goes full width */
  .results {
    grid-template-columns: 1fr;
  }

  /* Modal box: nearly full screen */
  .modal-box {
    width: 96vw;
    max-width: none;
    max-height: 90vh;
    overflow-y: auto;
  }

  /* Statline pills wrap nicely */
  .statline {
    flex-direction: column;
    align-items: flex-start;
  }
}

#lb-table table{ width:100%; border-collapse:collapse; }
#lb-table th,#lb-table td{ border-bottom:1px solid #233055; padding:8px; text-align:left; }
#lb-table th{ color:#a6b3d5; font-weight:600; }
